{
  "region": "us-east-1",
  "lambda": {
    "chatbot": {
      "provisionedConcurrency": {
        "enabled": true,
        "concurrentExecutions": 1
      }
    }
  },
  "api": {
    "throttling": {
      "ratePerMinute": 10,
      "ratePerHour": 100
    }
  },
  "widget": {
    "defaultTheme": {
      "primaryColor": "#4287f5",
      "secondaryColor": "#f5f5f5",
      "fontFamily": "'Helvetica Neue', sans-serif",
      "fontSize": "16px",
      "borderRadius": "8px"
    }
  },
  "s3Vectors": {
    "indexName": "chatbot-document-vectors",
    "dimensions": 1024,
    "similarityMetric": "COSINE"
  },
  "retrieval": {
    "multiStage": {
      "enabled": true,
      "fallbackToSingleStage": true
    },
    "thresholds": {
      "simple": {
        "stage1": 0.4,
        "final": 0.6
      },
      "medium": {
        "stage1": 0.4,
        "final": 0.6
      },
      "complex": {
        "stage1": 0.25,
        "final": 0.4
      }
    },
    "limits": {
      "expansionMultiplier": {
        "simple": 2,
        "medium": 3,
        "complex": 4
      }
    }
  },
  "hybrid_search": {
    "enabled": true,
    "semantic_weight": 0.7,
    "keyword_weight": 0.3,
    "bm25_params": {
      "k1": 2.0,
      "b": 0.50
    },
    "fallback_to_semantic": true
  },
  "bedrock": {
    "modelId": "amazon.nova-lite-v1:0",
    "guardrails": {
      "createDefault": true,
      "defaultGuardrailConfig": {
        "name": "ChatbotGuardrail",
        "description": "Content guardrail for RAG chatbot",
        "contentPolicyConfig": {
          "filters": [
            {
              "type": "SEXUAL",
              "strength": "MEDIUM"
            },
            {
              "type": "VIOLENCE",
              "strength": "MEDIUM"
            },
            {
              "type": "HATE",
              "strength": "MEDIUM"
            },
            {
              "type": "INSULTS",
              "strength": "MEDIUM"
            }
          ]
        },
        "wordPolicyConfig": {
          "managedWordLists": [
            {
              "type": "PROFANITY"
            }
          ],
          "customWordLists": []
        }
      }
    }
  },
  "costMonitoring": {
    "enabled": true,
    "cloudWatchNamespace": "Chatbot/Costs",
    "batchSize": 20,
    "flushInterval": 60,
    "trackConversationCosts": true,
    "enableDetailedMetrics": true,
    "maxRequestsPerMinute": 150,
    "maxErrors": 10,
    "circuitTimeout": 300,
    "costAlerts": {
      "enabled": true,
      "dailyThreshold": 5.0,
      "monthlyThreshold": 100.0,
      "conversationThreshold": 0.10
    },
    "metricsCollection": {
      "maxBatchSize": 20,
      "maxQueueSize": 1000,
      "aggregationWindow": 60
    }
  }
}
