<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Small Scale Chatbot Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    header {
      background-color: #4287f5;
      color: white;
      padding: 20px;
      text-align: center;
    }
    h1 {
      margin: 0;
    }
    .content {
      display: flex;
      flex-wrap: wrap;
      margin-top: 30px;
    }
    .info {
      flex: 1;
      min-width: 300px;
      padding: 20px;
    }
    .chatbot-wrapper {
      flex: 1;
      min-width: 300px;
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    .feature {
      background-color: white;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .feature h3 {
      margin-top: 0;
      color: #4287f5;
    }
    .controls {
      text-align: center;
      margin-top: 20px;
    }
    .controls button {
      background-color: #4287f5;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      margin: 0 5px;
    }
    .controls button:hover {
      background-color: #3a76d8;
    }
    footer {
      text-align: center;
      margin-top: 30px;
      padding: 20px;
      color: #666;
    }
  </style>
</head>
<body>
  <header>
    <h1>Small Organization Chatbot Demo</h1>
    <p>A cost-effective RAG-powered chatbot solution</p>
  </header>

  <div class="container">
    <div class="content">
      <div class="info">
        <div class="feature">
          <h3>About This Demo</h3>
          <p>This is a demonstration of a low-cost, highly available chatbot solution designed for small organizations or smaller use cases. The chatbot uses Retrieval-Augmented Generation (RAG) to provide accurate, organization-specific responses.</p>
        </div>

        <div class="feature">
          <h3>Key Features</h3>
          <ul>
            <li>Customizable appearance to match your brand</li>
            <li>RAG capabilities for organization-specific knowledge</li>
            <li>Serverless architecture for cost efficiency</li>
            <li>Easy integration with any website</li>
            <li>Content moderation and security features</li>
            <li>Client-side caching for improved performance</li>
          </ul>
        </div>

        <div class="feature">
          <h3>Try It Out</h3>
          <p>Ask the chatbot questions about the topics included in your documents. The chatbot will use its knowledge base to provide relevant information.</p>
          <p>Example questions:</p>
          <ul>
            <li>Explain the benefits of using the cloud for computing?</li>
            <li>What are the types of Amazon S3 storage?</li>
            <li>What are the supported runtimes for AWS Lambda?</li>
          </ul>
          <p><strong>Pro tip:</strong> Try asking the same question twice to see the caching in action!</p>
        </div>
        
        <div class="controls">
          <button id="clear-cache">Clear Cache</button>
          <button id="toggle-cache">Disable Caching</button>
          <button id="toggle-streaming">Disable Streaming</button>
          <button id="reconnect-ws">Reconnect WebSocket</button>
          <div id="connection-status" style="margin-top: 10px; font-size: 14px;">Connection: <span>Checking...</span></div>
        </div>
      </div>

      <div class="chatbot-wrapper">
        <div id="chatbot-container"></div>
      </div>
    </div>
  </div>


  <script src="widget.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize chatbot
      SmallBizChatbot.init({
        containerId: 'chatbot-container',
        theme: {
          primaryColor: '#4287f5',
          secondaryColor: '#f5f5f5',
          fontFamily: 'Arial, sans-serif',
          fontSize: '16px',
          borderRadius: '8px'
        },
        cache: {
          enabled: true,
          maxEntries: 20,
          ttl: 3600000 // 1 hour
        }
      });
      
      // Set up control buttons
      document.getElementById('clear-cache').addEventListener('click', function() {
        SmallBizChatbot.clearCache();
        alert('Cache cleared!');
      });
      
      const toggleButton = document.getElementById('toggle-cache');
      let cacheEnabled = true;
      
      toggleButton.addEventListener('click', function() {
        cacheEnabled = !cacheEnabled;
        SmallBizChatbot.setCacheEnabled(cacheEnabled);
        toggleButton.textContent = cacheEnabled ? 'Disable Caching' : 'Enable Caching';
        alert(cacheEnabled ? 'Caching enabled!' : 'Caching disabled!');
      });
      
      const streamingButton = document.getElementById('toggle-streaming');
      let streamingEnabled = true;
      
      streamingButton.addEventListener('click', function() {
        streamingEnabled = !streamingEnabled;
        SmallBizChatbot.setStreamingEnabled(streamingEnabled);
        streamingButton.textContent = streamingEnabled ? 'Disable Streaming' : 'Enable Streaming';
        alert(streamingEnabled ? 'Streaming enabled!' : 'Streaming disabled!');
      });
      
      document.getElementById('reconnect-ws').addEventListener('click', function() {
        SmallBizChatbot.reconnectWebSocket();
        alert('Attempting to reconnect WebSocket...');
      });
      
      // Update connection status
      const connectionStatus = document.getElementById('connection-status').querySelector('span');
      
      function updateConnectionStatus() {
        const state = SmallBizChatbot.getConnectionState();
        connectionStatus.textContent = state;
        
        // Set color based on state
        switch(state) {
          case 'OPEN':
            connectionStatus.style.color = 'green';
            break;
          case 'CONNECTING':
            connectionStatus.style.color = 'orange';
            break;
          case 'CLOSED':
            connectionStatus.style.color = 'red';
            break;
          default:
            connectionStatus.style.color = 'gray';
        }
      }
      
      // Update status every second
      setInterval(updateConnectionStatus, 1000);
    });
  </script>
</body>
</html>
